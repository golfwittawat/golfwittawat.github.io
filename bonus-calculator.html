<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÇ‡∏ö‡∏ô‡∏±‡∏™ (‡πÅ‡∏ö‡∏ö‡πÅ‡∏ö‡πà‡∏á‡∏à‡πà‡∏≤‡∏¢)</title>
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f4f6f9;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 450px;
        }
        h2 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            box-sizing: border-box;
            background-color: #fff;
        }
        /* ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-calc {
            background-color: #138b03d3;
            color: white;
        }
        .btn-calc:hover {
            background-color: #46e408;
        }
        .btn-default {
            background-color: #95a5a6;
            color: white;
        }
        .btn-default:hover {
            background-color: #7f8c8d;
        }

        .result-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #fdf2e9;
            border: 1px solid #d35400;
            border-radius: 6px;
            text-align: center;
            display: none;
        }
        .result-value {
            font-size: 24px;
            color: #d35400;
            font-weight: bold;
        }
        .installment-info {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px dashed #d35400;
            font-weight: bold;
            color: #e67e22;
        }
        .detail-text {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
            line-height: 1.6;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏õ‡∏µ 2568</h2>
    
    <div class="form-group">
        <label for="salary">‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
        <input type="number" id="salary" value="" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...">
    </div>

    <div class="form-group">
        <label for="totalDays">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ (‡∏ß‡∏±‡∏ô)</label>
        <input type="number" id="totalDays" value="60" readonly style="background-color: #eee; color: #777;">
    </div>

    <div class="form-group">
        <label for="leaveSelect">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏≤ (‡∏£‡∏ß‡∏°)</label>
        <select id="leaveSelect">
            <option value="0">‡πÑ‡∏°‡πà‡∏•‡∏≤‡πÄ‡∏•‡∏¢ (‡πÑ‡∏°‡πà‡∏´‡∏±‡∏Å)</option>
        </select>
    </div>

    <div class="form-group">
        <label for="percent">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÇ‡∏ö‡∏ô‡∏±‡∏™ (%)</label>
        <input type="number" id="percent" value="30" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30">
    </div>

    <div class="button-group">
        <button class="btn-default" onclick="setDefaults()">‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</button>
        <button class="btn-calc" onclick="calculateBonus()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô</button>
    </div>

    <div id="resultBox" class="result-box">
        <div>‡∏¢‡∏≠‡∏î‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</div>
        <div class="result-value" id="finalBonus">0.00 ‡∏ö‡∏≤‡∏ó</div>
        <div class="detail-text" id="calculationDetail"></div>
        <div class="installment-info" id="installmentDetail"></div>
    </div>
</div>

<script>
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
    window.onload = function() {
        createOptions();
    };

    function createOptions() {
        const select = document.getElementById('leaveSelect');
        select.innerHTML = '<option value="0">‡πÑ‡∏°‡πà‡∏•‡∏≤‡πÄ‡∏•‡∏¢ (‡πÑ‡∏°‡πà‡∏´‡∏±‡∏Å)</option>';

        const penaltyStep = 7; 
        const leaveStep = 3;   
        const maxPenalty = 60; 

        for (let i = 1; ; i++) {
            let deductDays = i * penaltyStep;
            let endRange = i * leaveStep; 
            let startRange = endRange - leaveStep + 1;

            if (deductDays > maxPenalty) {
                let option = document.createElement("option");
                option.value = maxPenalty;
                option.text = `‡∏•‡∏≤ ${startRange} ‡∏ß‡∏±‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ (‡∏´‡∏±‡∏Å‡∏´‡∏°‡∏î ${maxPenalty} ‡∏ß‡∏±‡∏ô)`;
                select.appendChild(option);
                break;
            }

            let option = document.createElement("option");
            option.value = deductDays;
            option.text = `‡∏•‡∏≤ ${startRange}-${endRange} ‡∏ß‡∏±‡∏ô (‡∏´‡∏±‡∏Å‡πÇ‡∏ö‡∏ô‡∏±‡∏™ ${deductDays} ‡∏ß‡∏±‡∏ô)`;
            select.appendChild(option);
            
            if (deductDays === maxPenalty) break;
        }
    }

    function setDefaults() {
        document.getElementById('salary').value = "";
        document.getElementById('totalDays').value = 60;
        document.getElementById('leaveSelect').value = 0; 
        document.getElementById('percent').value = 30;
        document.getElementById('resultBox').style.display = 'none';
    }

    function calculateBonus() {
        const salary = parseFloat(document.getElementById('salary').value);
        
        if (isNaN(salary)) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö");
            return;
        }

        const totalDays = parseFloat(document.getElementById('totalDays').value) || 60;
        const percent = parseFloat(document.getElementById('percent').value) || 0;
        const daysToDeduct = parseFloat(document.getElementById('leaveSelect').value) || 0;

        let calculatedDays = totalDays - daysToDeduct;
        if (calculatedDays < 0) calculatedDays = 0;

        const dailyRate = salary / 30;
        const baseAmount = dailyRate * calculatedDays;
        
        // ‡∏¢‡∏≠‡∏î‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏™‡∏∏‡∏ó‡∏ò‡∏¥
        const bonus = baseAmount * (percent / 100);

        // --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏ö‡πà‡∏á‡∏à‡πà‡∏≤‡∏¢ (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà) ---
        let months = 0;
        let note = "";

        if (bonus <= 3000) {
            months = 1;
            note = "‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß";
        } else if (bonus <= 5000) {
            months = 5;
            note = "‡πÅ‡∏ö‡πà‡∏á‡∏à‡πà‡∏≤‡∏¢ 5 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô";
        } else {
            months = 12;
            note = "‡πÅ‡∏ö‡πà‡∏á‡∏à‡πà‡∏≤‡∏¢ 12 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô";
        }
        
        const monthlyPayment = bonus / months;
        // ----------------------------------

        const resultBox = document.getElementById('resultBox');
        const finalBonusDisplay = document.getElementById('finalBonus');
        const detailDisplay = document.getElementById('calculationDetail');
        const installmentDisplay = document.getElementById('installmentDetail');
        const formatter = new Intl.NumberFormat('th-TH', { style: 'currency', currency: 'THB' });

        resultBox.style.display = 'block';
        finalBonusDisplay.innerText = formatter.format(bonus);
        
        detailDisplay.innerHTML = `
            ‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalDays} ‡∏ß‡∏±‡∏ô<br>
            <span style="color: #c0392b;">‡∏ñ‡∏π‡∏Å‡∏´‡∏±‡∏Å‡∏≠‡∏≠‡∏Å: ${daysToDeduct} ‡∏ß‡∏±‡∏ô (‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ß‡∏±‡∏ô‡∏•‡∏≤)</span><br>
            ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì: <b>${calculatedDays}</b> ‡∏ß‡∏±‡∏ô<br>
            ‡∏ê‡∏≤‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: ${formatter.format(baseAmount)}
        `;

        // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ö‡πà‡∏á‡∏à‡πà‡∏≤‡∏¢
        installmentDisplay.innerHTML = `
            ${note}<br>
            <span style="font-size: 1.2em;">‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô ${formatter.format(monthlyPayment)} ‡∏ö‡∏≤‡∏ó</span>
        `;
    }
</script>

</body>
</html>